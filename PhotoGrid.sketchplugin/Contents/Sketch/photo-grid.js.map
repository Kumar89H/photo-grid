{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/photo-grid.js","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["UI","require","DOM","Settings","aspectRatios","options","initOptions","form","defaults","isRowLayout","padding","hasWidthLimit","maxWidth","option","value","eval","settingForKey","undefined","setSettingForKey","onRandomizeAspectRatios","context","document","getSelectedDocument","selection","selectedLayers","length","message","bounds","getBoundingBox","layers","groups","findGroups","forEach","randomizeAspectRatios","group","onFit","y","fitLayersInRows","sketchObject","absoluteRect","frame","height","x","fitLayersInColumns","width","onSettings","alert","createDialog","response","runModal","spacingTextFieldInput","spacingTextField","stringValue","spacingValue","parseInt","isNaN","layoutRadioInput","layoutMatrix","cells","indexOfObject","selectedCell","hasWidthLimitCheckbox","state","NSOnState","maxWidthTextFieldInput","maxWidthTextField","maxWidthValue","orderedLayers","sort","a","b","layer","setConstrainProportions","ratio","randomAspectRatio","delta","getDelta","Math","round","floor","random","min","max","lastLayer","median","map","widths","totalWidth","reduce","total","current","totalPadding","scale","heights","totalHeight","deltaX","deltaY","remainingLayers","Set","range","largestGroup","findLayersInGroup","delete","push","size","groupA","groupB","referenceLayer","found","rowCentre","getLayerCentre","lower","upper","centre","values","half","lefts","rights","tops","bottoms","viewWidth","viewHeight","dialog","NSAlert","alloc","init","setMessageText","addButtonWithTitle","view","NSView","initWithFrame","NSMakeRect","setAccessoryView","infoLabel","createTextField","spacingLabel","layoutLabel","maxWidthLabel","NSTextField","createCheckbox","buttonFormat","NSButtonCell","setButtonType","NSRadioButton","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","NSRadioModeMatrix","setCellSize","CGSizeMake","objectAtIndex","setTitle","setStringValue","String","selectCellAtRow_column","setEnabled","setCOSJSTargetFunction","sender","addSubview","textField","setSelectable","setEditable","setBezeled","setDrawsBackground","title","isChecked","checkbox","NSButton","NSSwitchButton","setBezelStyle","setState","NSOffState"],"mappings":"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","file":"photo-grid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/photo-grid.js\");\n","const UI = require('sketch/ui'),\n      DOM = require('sketch/dom'),\n      Settings = require('sketch/settings');\n\nconst aspectRatios = [1, 10/8, 4/3, 7/5, 3/2, 16/9, 2/3, 5/7, 3/4, 8/10];\n\nvar options = initOptions();\nvar form = {};\n\nfunction initOptions() {\n  const defaults = {\n    isRowLayout: true,\n    padding: 16,\n    hasWidthLimit: false,\n    maxWidth: 1200\n  };\n  for (let option in defaults) {\n    let value = eval(Settings.settingForKey(option));\n    if (value === undefined) {\n      Settings.setSettingForKey(option, defaults[option]);\n    } else {\n      defaults[option] = value;\n    }\n  }\n  return defaults\n}\n\nexport function onRandomizeAspectRatios(context) {\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers;\n\n  if (selection.length === 0) {\n    UI.message('Select one or more layers');\n  } else {\n    let bounds = getBoundingBox(selection.layers);\n    let groups = findGroups(selection.layers);\n\n    groups.forEach(group => {\n      randomizeAspectRatios(group, bounds);\n    });\n  }\n}\n\nexport function onFit(context) {\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers;\n\n  if (selection.length === 0) {\n    UI.message('Select one or more layers');\n  } else {\n    let bounds = getBoundingBox(selection.layers);\n    let groups = findGroups(selection.layers);\n\n    if (options.isRowLayout) {\n\n      let y = bounds.y;\n      groups.forEach(group => {\n        fitLayersInRows(group, bounds, y);\n        y = group[0].sketchObject.absoluteRect().y() + group[0].frame.height + options.padding;\n      });\n\n    } else {\n\n      let x = bounds.x;\n      groups.forEach(group => {\n        fitLayersInColumns(group, bounds, x);\n        x = group[0].sketchObject.absoluteRect().x() + group[0].frame.width + options.padding;\n      });\n\n    }\n  }\n}\n\nexport function onSettings(context) {\n\n  var alert = createDialog();\n\n  var response = alert.runModal();\n\n  if (response == \"1000\") {\n    // This code only runs when the user clicks 'OK';\n\n    // Get Spacing\n    let spacingTextFieldInput = form.spacingTextField.stringValue();\n    let spacingValue = parseInt(spacingTextFieldInput);\n\n    if (isNaN(spacingValue) || spacingTextFieldInput === '') {\n      UI.message('⚠️ The spacing was not changed. Try entering a number.');\n    } else if (spacingValue < 0 || spacingValue > 1000) {\n      UI.message('⚠️ Enter a spacing value between 0 and 1000');\n    } else {\n      options.padding = spacingValue;\n      Settings.setSettingForKey('padding', spacingValue);\n    }\n\n    // Get Layout\n    let layoutRadioInput = form.layoutMatrix.cells().indexOfObject(form.layoutMatrix.selectedCell());\n    options.isRowLayout = (layoutRadioInput === 0)\n    Settings.setSettingForKey('isRowLayout', options.isRowLayout);\n\n    // Get max width setting\n    options.hasWidthLimit = (form.hasWidthLimitCheckbox.state() == NSOnState);\n    Settings.setSettingForKey('hasWidthLimit', options.hasWidthLimit);\n\n    // Get width value\n    let maxWidthTextFieldInput = form.maxWidthTextField.stringValue();\n    let maxWidthValue = parseInt(maxWidthTextFieldInput);\n\n    if (isNaN(maxWidthValue) || maxWidthTextFieldInput === '') {\n      UI.message('⚠️ The maximum width was not changed. Try entering a number.');\n    } else if (maxWidthValue < 0 || maxWidthValue > 10000) {\n      UI.message('⚠️ Enter a maximum width between 0 and 10,000');\n    } else {\n      options.maxWidth = maxWidthValue;\n      Settings.setSettingForKey('maxWidth', maxWidthValue);\n    }\n\n\n  }\n\n}\n\nfunction randomizeAspectRatios(layers, bounds) {\n  let orderedLayers;\n\n  let x = bounds.x,\n      y = bounds.y;\n\n  if (options.isRowLayout) {\n    orderedLayers = layers.sort((a, b) => a.sketchObject.absoluteRect().x() - b.sketchObject.absoluteRect().x());\n    y = orderedLayers[0].sketchObject.absoluteRect().y();\n  } else {\n    orderedLayers = layers.sort((a, b) => a.sketchObject.absoluteRect().y() - b.sketchObject.absoluteRect().y());\n    x = orderedLayers[0].sketchObject.absoluteRect().x();\n  }\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let ratio = randomAspectRatio();\n    let delta = getDelta(layer, x, y);\n    let frame = layer.frame;\n\n    frame.x += delta.x;\n    frame.y += delta.y;\n\n    if (options.isRowLayout) {\n      frame.width = Math.round(frame.height * ratio);\n      x += frame.width + options.padding;\n    } else {\n      frame.height = Math.round(frame.width / ratio);\n      y += frame.height + options.padding;\n    }\n\n    layer.frame = frame;\n\n  });\n\n}\n\nfunction randomAspectRatio() {\n  return aspectRatios[Math.floor(Math.random() * aspectRatios.length)]\n}\n\nfunction fitLayersInRows(layers, bounds, y) {\n  let min = bounds.x;\n  let max = bounds.x + bounds.width;\n\n  let orderedLayers = layers.sort((a, b) => a.sketchObject.absoluteRect().x() - b.sketchObject.absoluteRect().x());\n  let lastLayer = orderedLayers[orderedLayers.length - 1];\n\n  let height = Math.round(median(layers.map(layer => layer.frame.height)));\n  let widths = layers.map(layer => layer.frame.width * height / layer.frame.height);\n  let totalWidth = widths.reduce((total, current) => total + current);\n\n  let totalPadding = (layers.length - 1) * options.padding;\n  let scale = (max - min) / (totalWidth + totalPadding);\n\n  let x = min;\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let delta = getDelta(layer, x, y);\n    let frame = layer.frame;\n\n    frame.x += delta.x;\n    frame.y += delta.y;\n\n    frame.width = Math.round(frame.width * height / frame.height * scale);\n    frame.height = Math.round(height * scale);\n    x += frame.width + options.padding;\n\n    layer.frame = frame;\n\n  });\n\n  let frame = lastLayer.frame;\n  frame.width = max - lastLayer.sketchObject.absoluteRect().x();\n  lastLayer.frame = frame;\n\n}\n\nfunction fitLayersInColumns(layers, bounds, x) {\n  let min = bounds.y;\n  let max = bounds.y + bounds.height;\n\n  let orderedLayers = layers.sort((a, b) => a.sketchObject.absoluteRect().y() - b.sketchObject.absoluteRect().y());\n  let lastLayer = orderedLayers[orderedLayers.length - 1];\n\n  let width = Math.round(median(layers.map(layer => layer.frame.width)));\n  let heights = layers.map(layer => layer.frame.height * width / layer.frame.width);\n  let totalHeight = heights.reduce((total, current) => total + current);\n\n  let totalPadding = (layers.length - 1) * options.padding;\n  let scale = (max - min) / (totalHeight + totalPadding);\n\n  let y = min;\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let delta = getDelta(layer, x, y);\n    let frame = layer.frame;\n\n    frame.x += delta.x;\n    frame.y += delta.y;\n\n    frame.height = Math.round(frame.height * width / frame.width * scale);\n    frame.width = Math.round(width * scale);\n    y += frame.height + options.padding;\n\n    layer.frame = frame;\n\n  });\n\n  let frame = lastLayer.frame;\n  frame.height = max - lastLayer.sketchObject.absoluteRect().y();\n  lastLayer.frame = frame;\n\n}\n\nfunction getDelta(layer, x, y) {\n  let absoluteRect = layer.sketchObject.absoluteRect();\n  let deltaX = x - absoluteRect.x();\n  let deltaY = y - absoluteRect.y();\n  return {x: deltaX, y: deltaY};\n}\n\nfunction findGroups(layers) {\n  let groups = [];\n  let remainingLayers = new Set(layers);\n\n  let range;\n  if (options.isRowLayout) {\n    range = Math.round(median(layers.map(layer => layer.frame.height)));\n  } else {\n    range = Math.round(median(layers.map(layer => layer.frame.width)));\n  }\n\n  while (remainingLayers.size > 0) {\n    let largestGroup = [];\n    remainingLayers.forEach(layer => {\n      let group = findLayersInGroup(remainingLayers, layer, range);\n      if (group.length > largestGroup.length) {\n        largestGroup = group;\n      }\n    });\n\n    largestGroup.forEach(layer => {\n      remainingLayers.delete(layer);\n    });\n\n    groups.push(largestGroup);\n  }\n\n  if (options.isRowLayout) {\n    return groups.sort((groupA, groupB) => groupA[0].sketchObject.absoluteRect().y() - groupB[0].sketchObject.absoluteRect().y());\n  } else {\n    return groups.sort((groupA, groupB) => groupA[0].sketchObject.absoluteRect().x() - groupB[0].sketchObject.absoluteRect().x());\n  }\n\n}\n\nfunction findLayersInGroup(layers, referenceLayer, range) {\n\n  let found = [];\n  let rowCentre = getLayerCentre(referenceLayer);\n\n  if (options.isRowLayout) {\n\n    let lower = rowCentre.y - range / 2;\n    let upper = rowCentre.y + range / 2;\n\n    layers.forEach(layer => {\n      let centre = getLayerCentre(layer);\n      if (centre.y > lower && centre.y < upper) {\n        found.push(layer);\n      }\n    });\n\n  } else {\n\n    let lower = rowCentre.x - range / 2;\n    let upper = rowCentre.x + range / 2;\n\n    layers.forEach(layer => {\n      let centre = getLayerCentre(layer);\n      if (centre.x > lower && centre.x < upper) {\n        found.push(layer);\n      }\n    });\n\n  }\n\n  return found;\n}\n\nfunction median(values) {\n  values.sort((a, b) => a - b);\n  let half = Math.floor(values.length/2);\n\n  if (values.length % 2) {\n    return values[half];\n  } else {\n    return (values[half-1] + values[half]) / 2.0;\n  }\n}\n\nfunction getBoundingBox(layers) {\n  let lefts = layers.map(layer => layer.sketchObject.absoluteRect().x()).sort((a, b) => a - b);\n  let rights = layers.map(layer => layer.sketchObject.absoluteRect().x() + layer.frame.width).sort((a, b) => a - b);\n  let tops = layers.map(layer => layer.sketchObject.absoluteRect().y()).sort((a, b) => a - b);\n  let bottoms = layers.map(layer => layer.sketchObject.absoluteRect().y() + layer.frame.height).sort((a, b) => a - b);\n  return {\n    x: lefts[0],\n    y: tops[0],\n    width: rights[layers.length - 1] - lefts[0],\n    height: bottoms[layers.length - 1] - tops[0]\n  }\n}\n\nfunction getLayerCentre(layer) {\n  return {\n    x: layer.sketchObject.absoluteRect().x() + layer.frame.width / 2,\n    y: layer.sketchObject.absoluteRect().y() + layer.frame.height / 2\n  };\n}\n\n// function numberLayers(layers, prefix) {\n//   let i = 1;\n//   layers.forEach(layer => {\n//     layer.name += `${prefix}-${i++}`\n//   });\n// }\n\nfunction createDialog() {\n\n  var viewWidth = 360;\n  var viewHeight = 250;\n\n  // Setup the window\n  var dialog = NSAlert.alloc().init();\n  dialog.setMessageText('Photo Grid Settings')\n  dialog.addButtonWithTitle('Ok');\n  dialog.addButtonWithTitle('Cancel');\n\n  // Create the main view\n  var view = NSView.alloc().initWithFrame(NSMakeRect(0, 0, viewWidth, viewHeight));\n  dialog.setAccessoryView(view);\n\n  // --------------------------------------------------------------------------\n\n  // Create labels\n  var infoLabel = createTextField('Choose row or column layout and set the layer spacing. Photo Grid will try to keep layers in existing rows or columns.' , NSMakeRect(0, viewHeight - 40, viewWidth - 10, 40));\n  var spacingLabel = createTextField('Spacing:', NSMakeRect(0, viewHeight - 70, 200, 20));\n  var layoutLabel = createTextField('Layout:', NSMakeRect(0, viewHeight - 135, 200, 20));\n  var maxWidthLabel = createTextField('Maximum Width:', NSMakeRect(0, viewHeight - 200, 200, 20));\n\n  // Create textfields\n  form.spacingTextField = NSTextField.alloc().initWithFrame(NSMakeRect(0, viewHeight - 95, 70, 20));\n  form.maxWidthTextField = NSTextField.alloc().initWithFrame(NSMakeRect(90, viewHeight - 225, 70, 20));\n\n  // Create checkbox\n  form.hasWidthLimitCheckbox = createCheckbox('On', NSMakeRect(0, viewHeight - 225, 90, 20), options.hasWidthLimit);\n\n\n  // --------------------------------------------------------------------------\n\n  // Create radiobuttons prototype\n  var buttonFormat = NSButtonCell.alloc().init();\n  buttonFormat.setButtonType(NSRadioButton);\n\n  // Create matrix for radio buttons\n  form.layoutMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(\n    NSMakeRect(0, viewHeight - 160, viewWidth, 20),\n    NSRadioModeMatrix,\n    buttonFormat,\n    1,\n    2\n  );\n\n  form.layoutMatrix.setCellSize(CGSizeMake(90, 20));\n\n  var cells = form.layoutMatrix.cells();\n  cells.objectAtIndex(0).setTitle('Rows →');\n  cells.objectAtIndex(1).setTitle('Columns ↓');\n\n  // --------------------------------------------------------------------------\n\n  // Configure inputs\n  form.spacingTextField.setStringValue(String(options.padding));\n  form.maxWidthTextField.setStringValue(String(options.maxWidth));\n\n  if (options.isRowLayout) {\n    form.layoutMatrix.selectCellAtRow_column(0, 0);\n  } else {\n    form.layoutMatrix.selectCellAtRow_column(0, 1);\n  }\n\n  if (options.hasWidthLimit) {\n    form.maxWidthTextField.setEnabled(true);\n  } else {\n    form.maxWidthTextField.setEnabled(false);\n  }\n\n\n  // Select / Deselect\n  form.hasWidthLimitCheckbox.setCOSJSTargetFunction((sender) => {\n    if (sender.state() == NSOnState) {\n      form.maxWidthTextField.setEnabled(true);\n    } else {\n      form.maxWidthTextField.setEnabled(false);\n    }\n  });\n\n\n  // Add inputs to view\n  view.addSubview(infoLabel);\n  view.addSubview(spacingLabel);\n  view.addSubview(layoutLabel);\n  view.addSubview(maxWidthLabel);\n  view.addSubview(form.spacingTextField);\n  view.addSubview(form.maxWidthTextField);\n  view.addSubview(form.layoutMatrix);\n  view.addSubview(form.hasWidthLimitCheckbox);\n\n  // --------------------------------------------------------------------------\n\n  // Show the dialog window\n  return dialog;\n}\n\nfunction createTextField(stringValue, frame) {\n  let textField = NSTextField.alloc().initWithFrame(frame);\n  textField.setStringValue(stringValue);\n  textField.setSelectable(false);\n  textField.setEditable(false);\n  textField.setBezeled(false);\n  textField.setDrawsBackground(false);\n  return textField;\n}\n\nfunction createCheckbox(title, frame, isChecked) {\n\n  let checkbox = NSButton.alloc().initWithFrame(frame);\n  checkbox.setButtonType(NSSwitchButton);\n  checkbox.setBezelStyle(0);\n  checkbox.setTitle(title);\n  if (isChecked) {\n    checkbox.setState(NSOnState);\n  } else {\n    checkbox.setState(NSOffState);\n  }\n\n  return checkbox;\n}\n","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}
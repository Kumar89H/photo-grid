{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/photo-grid.js","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["UI","require","DOM","Settings","aspectRatios","options","isRowLayout","padding","getPadding","onRandomizeAspectRatios","context","document","getSelectedDocument","selection","selectedLayers","length","message","bounds","getBoundingBox","layers","groups","findGroups","forEach","randomizeAspectRatios","group","x","onFit","y","fitLayers","width","sketchObject","absoluteRect","frame","height","onSettings","input","getStringFromUser","value","parseInt","isNaN","setSettingForKey","orderedLayers","sort","a","b","firstLayer","layer","setConstrainProportions","ratio","Math","floor","random","delta","getDelta","round","minX","maxX","lastLayer","median","map","widths","totalWidth","reduce","total","current","totalPadding","scale","deltaX","deltaY","remainingLayers","Set","range","largestGroup","findLayersInGroup","delete","push","size","groupA","groupB","referenceLayer","found","rowCentre","getLayerCentre","lower","upper","centre","settingForKey","undefined","values","half","lefts","rights","tops","bottoms"],"mappings":"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","file":"photo-grid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/photo-grid.js\");\n","const UI = require('sketch/ui'),\n      DOM = require('sketch/dom'),\n      Settings = require('sketch/settings');\n\nconst aspectRatios = [1, 10/8, 4/3, 7/5, 3/2, 16/9, 2/3, 5/7, 3/4, 8/10];\n\nvar options = {\n  isRowLayout: true,\n  padding: getPadding()\n};\n\nexport function onRandomizeAspectRatios(context) {\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers;\n\n  if (selection.length === 0) {\n    UI.message('Select one or more layers');\n  } else {\n    let bounds = getBoundingBox(selection.layers);\n    let groups = findGroups(selection.layers);\n\n    // let i = 1;\n\n    groups.forEach(group => {\n      randomizeAspectRatios(group, bounds.x);\n      // numberLayers(group, `Group ${i++}`);\n    });\n  }\n}\n\nexport function onFit(context) {\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers;\n\n  if (selection.length === 0) {\n    UI.message('Select one or more layers');\n  } else {\n    let bounds = getBoundingBox(selection.layers);\n    let groups = findGroups(selection.layers);\n\n    // let i = 1;\n    let y = bounds.y;\n\n    groups.forEach(group => {\n      fitLayers(group, bounds.x, bounds.x + bounds.width, y);\n      y = group[0].sketchObject.absoluteRect().y() + group[0].frame.height + getPadding();\n    });\n  }\n}\n\nexport function onSettings(context) {\n  let input = UI.getStringFromUser(\"Enter a padding value\", options.padding);\n  if (input != 'null') {\n    let value = parseInt(input);\n    if (isNaN(value) || input === '') {\n      UI.message('⚠️ The padding was not changed. Try entering a number.');\n    } else if (value < 0 || value > 1000) {\n      UI.message('⚠️ Enter a number between 0 and 1000');\n    } else {\n      Settings.setSettingForKey('padding', value);\n      options.padding = value;\n    }\n  }\n}\n\nfunction randomizeAspectRatios(layers, x, y) {\n\n  let orderedLayers = layers.sort((a, b) => a.sketchObject.absoluteRect().x() - b.sketchObject.absoluteRect().x());\n  let firstLayer = orderedLayers[0];\n\n  x = x || firstLayer.sketchObject.absoluteRect().x();\n  y = y || firstLayer.sketchObject.absoluteRect().y();\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let absoluteRect = layer.sketchObject.absoluteRect();\n    let ratio = aspectRatios[Math.floor(Math.random() * aspectRatios.length)]\n    let frame = layer.frame;\n    let height = frame.height;\n\n    let delta = getDelta(layer, x, y);\n\n    frame.x += delta.x;\n    frame.y += delta.y;\n    frame.width = Math.round(height * ratio);\n\n    layer.frame = frame;\n\n    x += frame.width + options.padding;\n\n  });\n\n}\n\nfunction fitLayers(layers, minX, maxX, y) {\n\n  let orderedLayers = layers.sort((a, b) => a.sketchObject.absoluteRect().x() - b.sketchObject.absoluteRect().x());\n  let firstLayer = orderedLayers[0];\n  let lastLayer = orderedLayers[orderedLayers.length - 1];\n\n  let height = Math.round(median(layers.map(layer => layer.frame.height)));\n  let widths = layers.map(layer => layer.frame.width * height / layer.frame.height);\n  let totalWidth = widths.reduce((total, current) => total + current);\n\n  minX = minX || firstLayer.sketchObject.absoluteRect().x();\n  maxX = maxX || lastLayer.sketchObject.absoluteRect().x() + lastLayer.frame.width;\n\n  let totalPadding = (layers.length - 1) * options.padding;\n  let scale = (maxX - minX) / (totalWidth + totalPadding);\n\n  let x = minX;\n  y = y || firstLayer.sketchObject.absoluteRect().y();\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let frame = layer.frame;\n\n    let delta = getDelta(layer, x, y);\n\n    frame.x += delta.x;\n    frame.y += delta.y;\n    frame.width = Math.round(frame.width * height / frame.height * scale);\n    frame.height = Math.round(height * scale);\n    layer.frame = frame;\n\n    x += frame.width + options.padding;\n\n  });\n\n  let frame = lastLayer.frame;\n  frame.width = maxX - lastLayer.sketchObject.absoluteRect().x();\n  lastLayer.frame = frame;\n\n}\n\nfunction getDelta(layer, x, y) {\n  let absoluteRect = layer.sketchObject.absoluteRect();\n  let deltaX = x - absoluteRect.x();\n  let deltaY = y - absoluteRect.y();\n  return {x: deltaX, y: deltaY};\n}\n\n\nfunction findGroups(layers) {\n  let groups = [];\n  let remainingLayers = new Set(layers);\n\n  let range;\n  if (options.isRowLayout) {\n    range = Math.round(median(layers.map(layer => layer.frame.height)));\n  } else {\n    range = Math.round(median(layers.map(layer => layer.frame.width)));\n  }\n\n  while (remainingLayers.size > 0) {\n    let largestGroup = [];\n    remainingLayers.forEach(layer => {\n      let group = findLayersInGroup(remainingLayers, layer, range);\n      if (group.length > largestGroup.length) {\n        largestGroup = group;\n      }\n    });\n\n    largestGroup.forEach(layer => {\n      remainingLayers.delete(layer);\n    });\n\n    groups.push(largestGroup);\n  }\n\n  if (options.isRowLayout) {\n    return groups.sort((groupA, groupB) => groupA[0].sketchObject.absoluteRect().y() - groupB[0].sketchObject.absoluteRect().y());\n  } else {\n    return groups.sort((groupA, groupB) => groupA[0].sketchObject.absoluteRect().x() - groupB[0].sketchObject.absoluteRect().x());\n  }\n\n}\n\nfunction findLayersInGroup(layers, referenceLayer, range) {\n\n  let found = [];\n  let rowCentre = getLayerCentre(referenceLayer);\n\n  if (options.isRowLayout) {\n\n    let lower = rowCentre.y - range / 2;\n    let upper = rowCentre.y + range / 2;\n\n    layers.forEach(layer => {\n      let centre = getLayerCentre(layer);\n      if (centre.y > lower && centre.y < upper) {\n        found.push(layer);\n      }\n    });\n\n  } else {\n\n    let lower = rowCentre.x - range / 2;\n    let upper = rowCentre.x + range / 2;\n\n    layers.forEach(layer => {\n      let centre = getLayerCentre(layer);\n      if (centre.x > lower && centre.x < upper) {\n        found.push(layer);\n      }\n    });\n\n  }\n\n  return found;\n}\n\nfunction getPadding() {\n  let padding = Settings.settingForKey('padding');\n  if (padding === undefined) {\n    padding = 16;\n    Settings.setSettingForKey('padding', 16);\n  }\n  return padding;\n}\n\nfunction median(values) {\n  values.sort((a, b) => a - b);\n  let half = Math.floor(values.length/2);\n\n  if (values.length % 2) {\n    return values[half];\n  } else {\n    return (values[half-1] + values[half]) / 2.0;\n  }\n}\n\nfunction getBoundingBox(layers) {\n  let lefts = layers.map(layer => layer.sketchObject.absoluteRect().x()).sort((a, b) => a - b);\n  let rights = layers.map(layer => layer.sketchObject.absoluteRect().x() + layer.frame.width).sort((a, b) => a - b);\n  let tops = layers.map(layer => layer.sketchObject.absoluteRect().y()).sort((a, b) => a - b);\n  let bottoms = layers.map(layer => layer.sketchObject.absoluteRect().y() + layer.frame.height).sort((a, b) => a - b);\n  return {\n    x: lefts[0],\n    y: tops[0],\n    width: rights[layers.length - 1] - lefts[0],\n    height: bottoms[layers.length - 1] - tops[0]\n  }\n}\n\nfunction getLayerCentre(layer) {\n  return {\n    x: layer.sketchObject.absoluteRect().x() + layer.frame.width / 2,\n    y: layer.sketchObject.absoluteRect().y() + layer.frame.height / 2\n  };\n}\n\n// function numberLayers(layers, prefix) {\n//   let i = 1;\n//   layers.forEach(layer => {\n//     layer.name += `${prefix}-${i++}`\n//   });\n// }\n","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}
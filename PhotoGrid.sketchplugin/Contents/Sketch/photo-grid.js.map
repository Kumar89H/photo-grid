{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/photo-grid.js","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["UI","require","DOM","Settings","onRandomizeAspectRatios","context","document","getSelectedDocument","selection","selectedLayers","length","message","bounds","getBoundingBox","layers","rows","findRows","forEach","randomizeAspectRatios","row","x","onFit","y","fitLayers","width","frame","height","getPadding","onSettings","padding","input","getStringFromUser","value","parseInt","isNaN","setSettingForKey","aspectRatios","orderedLayers","sort","a","b","firstLayer","layer","sketchObject","setConstrainProportions","ratio","Math","floor","random","round","minX","maxX","lastLayer","median","map","widths","totalWidth","reduce","total","current","totalPadding","scale","remainingLayers","Set","medianRowHeight","largestRow","findLayersInRow","delete","push","size","rowA","rowB","referenceLayer","rowHeight","rowCentre","getLayerCentre","top","bottom","layersInRow","centre","settingForKey","undefined","values","half","lefts","rights","tops","bottoms","compareFlowOrder","layerA","layerB","valueA","valueB","numberLayers","prefix","i","name"],"mappings":"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","file":"photo-grid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/photo-grid.js\");\n","const UI = require('sketch/ui'),\n      DOM = require('sketch/dom'),\n      Settings = require('sketch/settings');\n\nexport function onRandomizeAspectRatios(context) {\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers;\n\n  if (selection.length === 0) {\n    UI.message('Select one or more layers');\n  } else {\n    let bounds = getBoundingBox(selection.layers);\n    let rows = findRows(selection.layers);\n\n    // let i = 1;\n\n    rows.forEach(row => {\n      randomizeAspectRatios(row, bounds.x);\n      // numberLayers(row, `Row ${i++}`);\n    });\n  }\n}\n\nexport function onFit(context) {\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers;\n\n  if (selection.length === 0) {\n    UI.message('Select one or more layers');\n  } else {\n    let bounds = getBoundingBox(selection.layers);\n    let rows = findRows(selection.layers);\n\n    // let i = 1;\n    let y = bounds.y;\n\n    rows.forEach(row => {\n      fitLayers(row, bounds.x, bounds.x + bounds.width, y);\n      y = row[0].frame.y + row[0].frame.height + getPadding();\n      // numberLayers(row, `Row ${i++}`);\n    });\n  }\n}\n\nexport function onSettings(context) {\n  let padding = getPadding();\n  let input = UI.getStringFromUser(\"Enter a padding value\", padding);\n  if (input != 'null') {\n    let value = parseInt(input);\n    if (isNaN(value) || input === '') {\n      UI.message('⚠️ The padding was not changed. Try entering a number.');\n    } else if (value < 0 || value > 1000) {\n      UI.message('⚠️ Enter a number between 0 and 1000');\n    } else {\n      Settings.setSettingForKey('padding', value);\n    }\n  }\n}\n\nfunction randomizeAspectRatios(layers, x, y) {\n\n  const aspectRatios = [1, 10/8, 4/3, 7/5, 3/2, 16/9, 2/3, 5/7, 3/4, 8/10];\n  let padding = getPadding();\n\n  let orderedLayers = layers.sort((a, b) => a.frame.x - b.frame.x);\n  let firstLayer = orderedLayers[0];\n\n  x = x || firstLayer.frame.x;\n  y = y || firstLayer.frame.y;\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let ratio = aspectRatios[Math.floor(Math.random() * aspectRatios.length)]\n    let frame = layer.frame;\n    let height = frame.height;\n\n    frame.x = x;\n    frame.y = y;\n    frame.width = Math.round(height * ratio);\n\n    layer.frame = frame;\n\n    x += frame.width + padding;\n\n  });\n\n}\n\nfunction fitLayers(layers, minX, maxX, y) {\n\n  let orderedLayers = layers.sort((a, b) => a.frame.x - b.frame.x);\n  let firstLayer = orderedLayers[0];\n  let lastLayer = orderedLayers[orderedLayers.length - 1];\n\n  let height = Math.round(median(layers.map(layer => layer.frame.height)));\n  let widths = layers.map(layer => layer.frame.width * height / layer.frame.height);\n  let totalWidth = widths.reduce((total, current) => total + current);\n\n  minX = minX || firstLayer.frame.x;\n  maxX = maxX || lastLayer.frame.x + lastLayer.frame.width;\n\n  let padding = getPadding();\n  let totalPadding = (layers.length - 1) * padding;\n  let scale = (maxX - minX) / (totalWidth + totalPadding);\n\n  let x = minX;\n  y = y || firstLayer.frame.y;\n\n  orderedLayers.forEach(layer => {\n\n    layer.sketchObject.setConstrainProportions(0);\n\n    let frame = layer.frame;\n    frame.x = x;\n    frame.y = y;\n    frame.width = Math.round(frame.width * height / frame.height * scale);\n    frame.height = Math.round(height * scale);\n    layer.frame = frame;\n\n    x += frame.width + padding;\n\n  });\n\n  let frame = lastLayer.frame;\n  frame.width = maxX - frame.x;\n  lastLayer.frame = frame;\n\n}\n\nfunction findRows(layers) {\n  let rows = [];\n  let remainingLayers = new Set(layers);\n  let medianRowHeight = Math.round(median(layers.map(layer => layer.frame.height)));\n\n  while (remainingLayers.size > 0) {\n    let largestRow = [];\n    remainingLayers.forEach(layer => {\n      let row = findLayersInRow(remainingLayers, layer, medianRowHeight);\n      if (row.length > largestRow.length) {\n        largestRow = row;\n      }\n    });\n\n    largestRow.forEach(layer => {\n      remainingLayers.delete(layer);\n    });\n\n    rows.push(largestRow);\n  }\n\n  return rows.sort((rowA, rowB) => rowA[0].frame.y - rowB[0].frame.y);\n}\n\nfunction findLayersInRow(layers, referenceLayer, rowHeight) {\n\n  let rowCentre = getLayerCentre(referenceLayer);\n  let top = rowCentre - rowHeight / 2;\n  let bottom = rowCentre + rowHeight / 2;\n  let layersInRow = [];\n\n  layers.forEach(layer => {\n    let centre = getLayerCentre(layer);\n    if (centre > top && centre < bottom) {\n      layersInRow.push(layer);\n    }\n  });\n\n  return layersInRow;\n}\n\nfunction getPadding() {\n  let padding = Settings.settingForKey('padding');\n  if (padding === undefined) {\n    padding = 16;\n    Settings.setSettingForKey('padding', 16);\n  }\n  return padding;\n}\n\nfunction median(values) {\n  values.sort((a, b) => a - b);\n  let half = Math.floor(values.length/2);\n\n  if (values.length % 2) {\n    return values[half];\n  } else {\n    return (values[half-1] + values[half]) / 2.0;\n  }\n}\n\nfunction getBoundingBox(layers) {\n  let lefts = layers.map(layer => layer.frame.x).sort((a, b) => a - b);\n  let rights = layers.map(layer => layer.frame.x + layer.frame.width).sort((a, b) => a - b);\n  let tops = layers.map(layer => layer.frame.y).sort((a, b) => a - b);\n  let bottoms = layers.map(layer => layer.frame.y + layer.frame.height).sort((a, b) => a - b);\n  return {\n    x: lefts[0],\n    y: tops[0],\n    width: rights[layers.length - 1] - lefts[0],\n    height: bottoms[layers.length - 1] - tops[0]\n  }\n}\n\nfunction getLayerCentre(layer) {\n  return layer.frame.y + layer.frame.height / 2;\n}\n\nfunction compareFlowOrder(layerA, layerB) {\n  let valueA = layerA.frame.x + layerA.frame.y * 1000;\n  let valueB = layerB.frame.x + layerB.frame.y * 1000;\n  return valueA - valueB;\n}\n\nfunction numberLayers(layers, prefix) {\n  let i = 1;\n  layers.forEach(layer => {\n    layer.name += `${prefix}-${i++}`\n  });\n}\n","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}